<!DOCTYPE html>
<html lang="en">
<!-- begin::Head -->
<head>
    <meta charset="utf-8" />
    <title>
        Flex | Student
    </title>
    <meta name="description" content="Latest updates and statistic charts">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!--begin::Web font -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script>
        WebFont.load({
            google: { "families": ["Montserrat:300,400,500,600,700", "Roboto:300,400,500,600,700"] },
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>
    <!--end::Web font -->
    <!--begin::Base Styles -->
    <!--begin::Page Vendors -->
    <link href="/Assets/vendors/custom/fullcalendar/fullcalendar.bundle.css" rel="stylesheet" type="text/css" />
    <!--end::Page Vendors -->
    <link href="/Assets/vendors/base/vendors.bundle.css" rel="stylesheet" type="text/css" />
    <link href="/Assets/demo/demo3/base/style.bundle.css" rel="stylesheet" type="text/css" />
    <!--end::Base Styles -->
    <link rel="shortcut icon" href="/Assets/demo/demo3/media/img/logo/favicon.ico" />
    <link href="/Assets/CustomCss.css" rel="stylesheet" />
    <script src="/Assets/vendors/base/vendors.bundle.js" type="text/javascript"></script>
</head>
<!-- end::Head -->
<!-- end::Body -->
<body class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--fixed m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default">
    <!-- begin:: Page -->
    <div class="m-grid m-grid--hor m-grid--root m-page">
        <!-- BEGIN: Header -->
        <header class="m-grid__item m-header" data-minimize-offset="200" data-minimize-mobile-offset="200">
            <div class="m-container m-container--fluid m-container--full-height">
                <div class="m-stack m-stack--ver m-stack--desktop">
                    <!-- BEGIN: Brand -->
                    <div class="m-stack__item m-brand  m-brand--skin-dark ">
                        <div class="m-stack m-stack--ver m-stack--general">
                            <div class="m-stack__item m-stack__item--middle m-stack__item--center m-brand__logo">
                                <a href="/Home" class="m-brand__logo-wrapper">
                                    <img class="img-responsive" src="../../Assets/demo/demo3/media/img/logo/flex-header.png" alt="" />
                                </a>
                            </div>
                            <div class="m-stack__item m-stack__item--middle m-brand__tools">
                                <!-- BEGIN: Responsive Aside Left Menu Toggler -->
                                <div id="m_aside_left_offcanvas_toggle" class="m-brand__icon m-brand__toggler m-brand__toggler--left m--visible-tablet-and-mobile-inline-block">
                                    <span></span>
                                </div>
                                <!-- END -->
                                <!-- BEGIN: Responsive Header Menu Toggler -->
                                
                                <!-- END -->
                                <!-- BEGIN: Topbar Toggler -->
                                <a id="m_aside_header_topbar_mobile_toggle" href="javascript:;" class="m-brand__icon m--visible-tablet-and-mobile-inline-block">
                                    <i class="flaticon-more"></i>
                                </a>
                                <!-- BEGIN: Topbar Toggler -->
                            </div>
                        </div>
                    </div>
                    <!-- END: Brand -->
                    <div class="m-stack__item m-stack__item--fluid m-header-head" id="m_header_nav">
                        <!-- BEGIN: Topbar -->
                        <div id="m_header_topbar" class="m-topbar  m-stack m-stack--ver m-stack--general">
                            <div class="m-stack__item m-topbar__nav-wrapper">
                                <ul class="m-topbar__nav m-nav m-nav--inline">

                                    <li class="m-nav__item m-topbar__user-profile m-topbar__user-profile--img m-dropdown m-dropdown--medium m-dropdown--arrow m-dropdown--header-bg-fill m-dropdown--align-right m-dropdown--mobile-full-width m-dropdown--skin-light" data-dropdown-toggle="click">
                                        <a href="#" class="m-nav__link m-dropdown__toggle">
                                                    <span class="m-topbar__welcome m--hidden-tablet m--hidden-mobile">
                                                        Hello Mr,&nbsp;
                                                    </span>
                                                <span class="m-topbar__username m--hidden-tablet m--hidden-mobile m--padding-right-15">
                                                    <span class="m-link">
                                                        Ubaid Ur Rehman
                                                    </span>
                                                </span>
                                                <span class="m-topbar__userpic">
                                                        <img src="/Home/show?arn=1624433" />
                                                </span>
                                        </a>
                                        <div class="m-dropdown__wrapper">
                                            <span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
                                            <div class="m-dropdown__inner">
                                                <div class="m-dropdown__header m--align-center">
                                                    <div class="m-card-user m-card-user--skin-dark">
                                                        <div class="m-card-user__pic">
                                                                <img src="/Home/show?arn=1624433" />
                                                        </div>
                                                        <div class="m-card-user__details">
                                                            <span class="m-card-user__name m--font-weight-500">
                                                                Ubaid Ur Rehman
                                                            </span>
                                                            <a class="m-card-user__email m--font-weight-300 m-link">
                                                                us22551@gmail.com
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="m-dropdown__body">
                                                    <div class="m-dropdown__content">
                                                        <ul class="m-nav m-nav--skin-light">
                                                            <li class="m-nav__item">
                                                                <a href="/" class="m-nav__link">
                                                                    <i class="m-nav__link-icon flaticon-profile"></i>
                                                                    <span class="m-nav__link-title">
                                                                        <span class="m-nav__link-wrap">
                                                                            <span class="m-nav__link-text">
                                                                                My Profile
                                                                            </span>
                                                                        </span>
                                                                    </span>
                                                                </a>
                                                            </li>
                                                            <li class="m-nav__item">
                                                                <a href="/Student/ChangePassword" class="m-nav__link">
                                                                    <i class="m-nav__link-icon flaticon-lock"></i>
                                                                    <span class="m-nav__link-text">
                                                                        Change Password
                                                                    </span>
                                                                </a>
                                                            </li>
                                                            <li class="m-nav__separator m-nav__separator--fit"></li>
                                                            <li class="m-nav__item text-center">
                                                                <a href="/Login/logout" class="btn btn-brand m-btn m-btn--custom m-btn--icon m-btn--pill m-btn--air">
                                                                    <span>
                                                                        <i class="la la-power-off"></i>
                                                                        <span>
                                                                            Logout
                                                                        </span>
                                                                    </span>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- END: Topbar -->
                    </div>
                </div>
            </div>
        </header>
        <!-- END: Header -->
        <!-- begin::Body -->
        <div class="m-grid__item m-grid__item--fluid m-grid m-grid--ver-desktop m-grid--desktop m-body">
            <!-- BEGIN: Left Aside -->
            <button class="m-aside-left-close m-aside-left-close--skin-dark" id="m_aside_left_close_btn">
                <i class="la la-close"></i>
            </button>
            <div id="m_aside_left" class="m-grid__item	m-aside-left  m-aside-left--skin-dark">
                <!-- BEGIN: Aside Menu -->
                <div id="m_ver_menu" class="m-aside-menu  m-aside-menu--skin-dark m-aside-menu--submenu-skin-dark m-aside-menu--dropdown " ata-menu-vertical="true" data-menu-dropdown="true" data-menu-scrollable="true" data-menu-dropdown-timeout="500">
                    <ul class="m-menu__nav  m-menu__nav--dropdown-submenu-arrow ">
                            <li class="m-menu__item  m-menu__item--submenu" aria-haspopup="true">
                                <a href="/" class="m-menu__link ">
                                    <span class="m-menu__item-here"></span>
                                    <i class="m-menu__link-icon la la-home"></i>
                                    <span class="m-menu__link-text">
                                        Home
                                    </span>
                                </a>
                            </li>
                                                    <li class="m-menu__item  m-menu__item--submenu" aria-haspopup="true">
                                <a href="/Student/CourseRegistration" class="m-menu__link m-menu__toggle">
                                    <span class="m-menu__item-here"></span>
                                    <i class="m-menu__link-icon flaticon-list-3"></i>
                                    <span class="m-menu__link-text">
                                        Course Registration
                                    </span>
                                </a>
                            </li>                         
                            <li class="m-menu__item  m-menu__item--submenu" aria-haspopup="true">
                                <a href="/Student/Attendance?semid=20193" class="m-menu__link m-menu__toggle">
                                    <span class="m-menu__item-here"></span>
                                    <i class="m-menu__link-icon flaticon-list-2"></i>
                                    <span class="m-menu__link-text">
                                        Attendance
                                    </span>
                                </a>
                            </li>
                                                    <li class="m-menu__item  m-menu__item--submenu" aria-haspopup="true" data-redirect="true">
                                <a href="/Student/Marks?semid=20193" class="m-menu__link m-menu__toggle">
                                    <span class="m-menu__item-here"></span>
                                    <i class="m-menu__link-icon flaticon-edit-1"></i>
                                    <span class="m-menu__link-text">
                                        Marks
                                    </span>
                                </a>
                            </li>
                                                    <li class="m-menu__item  m-menu__item--submenu" aria-haspopup="true" data-redirect="true">
                                <a href="/Student/Transcript" class="m-menu__link m-menu__toggle">
                                    <span class="m-menu__item-here"></span>
                                    <i class="m-menu__link-icon flaticon-folder-1"></i>
                                    <span class="m-menu__link-text">
                                        Transcript
                                    </span>
                                </a>
                            </li>
                                                    <li class="m-menu__item  m-menu__item--active" aria-haspopup="true" data-redirect="true">
                                <a href="/Student/Challan" class="m-menu__link m-menu__toggle">
                                    <span class="m-menu__item-here"></span>
                                    <i class="m-menu__link-icon flaticon-coins"></i>
                                    <span class="m-menu__link-text">
                                        Fee Challan
                                    </span>
                                </a>
                            </li>
                                                    <li class="m-menu__item  m-menu__item--submenu" aria-haspopup="true" data-redirect="true">
                                <a href="/ConsolidatedFeeReport/ConsolidatedStdFeeReport" class="m-menu__link m-menu__toggle">
                                    <span class="m-menu__item-here"></span>
                                    <i class="m-menu__link-icon flaticon-coins"></i>
                                    <span class="m-menu__link-text">
                                        Fee Details
                                    </span>
                                </a>
                            </li>
                                                    <li class="m-menu__item  m-menu__item--submenu" aria-haspopup="true" data-redirect="true">
                                <a href="/Student/CourseFeedback" class="m-menu__link m-menu__toggle">
                                    <span class="m-menu__item-here"></span>
                                    <i class="m-menu__link-icon flaticon-file"></i>
                                    <span class="m-menu__link-text">
                                        Course Feedback
                                    </span>
                                </a>
                            </li>
                                                    <li class="m-menu__item  m-menu__item--submenu" aria-haspopup="true" data-redirect="true">
                                <a href="/Student/TentativeStudyPlan" class="m-menu__link m-menu__toggle">
                                    <span class="m-menu__item-here"></span>
                                    <i class="m-menu__link-icon flaticon-time"></i>
                                    <span class="m-menu__link-text">
                                        Tentative Study Plan
                                    </span>
                                </a>
                            </li>
                    </ul>
                </div>
                <!-- END: Aside Menu -->
            </div>
            <!-- END: Left Aside -->

            <div class="m-grid__item m-grid__item--fluid m-wrapper">
                <div class="m-subheader ">
                    <div class="d-flex align-items-center">
                        <div class="mr-auto">
                            <h3 class="m-subheader__title m-subheader__title--separator">
                                Challan
                            </h3>
                            <label>  

        <a href="/" title="Home">Home</a>
         &gt; 

    Fee Challan
</label>
                        </div>

                    </div>
                </div>
                <div class="m-content">
                    

<div class="m-portlet m-portlet--primary m-portlet--head-solid-bg m-portlet--border-bottom-info m-portlet--head-sm">
    <div class="m-portlet__head">
        <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
                <h3 class="m-portlet__head-text">
                    Student Challan
                </h3>
            </div>
        </div>
    </div>
    <div class="m-portlet__body">
        <!--begin::Section-->
        <div class="m-section">
            <div class="m-section__content">
                    <table class="table m-table m-table--head-bg-metal table-responsive">
                        <thead>
                            <tr>
                                <th class="text-center">S. No</th>
                                <th class="text-center">Challan No.</th>
                                <th class="text-center">Amount</th>
                                <th class="text-center">Generated On</th>
                                <th class="text-center">Due Date</th>
                                <th class="text-center">Status</th>
                                <th class="text-center">Print</th>
                                <th class="text-center">Detail</th>
                            </tr>
                        </thead>
                        <tbody>

                                    <tr>
                                        <td class="text-center">1</td>
                                        <td class="text-center">11936403703</td>
                                        <td class="text-center">137000 Rs.</td>
                                        <td class="text-center">8/28/2019</td>
                                        <td class="text-center">9/2/2019</td>
                                        <td class="text-center">Valid</td>
                                        <td class="text-center"><a href="#" id="btnPrintChallan" class="btn btn-primary btn-sm" onclick="ftn_PrintChallanForm(11936403703)">Print Challan</a></td>
                                        <td class="text-center"><a href="#" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#ChallanDetail" onclick="fn_StdFeeDetail(11936403703) ">View Detail</a></td>
                                    </tr>
                        </tbody>
                    </table>
            </div>
        </div>
        <!--end::Section-->
    </div>
    <!--end::Form-->
</div>

<div id="ChallanDetail" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Challan Detail</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6 col-sm-6">
                        <div class="form-group">
                            <label style="font-weight: bold;">Challan No.:</label>

                            <label id="lbChallan"></label>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6">
                        <div class="form-group">
                            <label style="font-weight: bold;">Amount:</label>
                            <label id="lbTotalAmount"></label>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6">
                        <div class="form-group">
                            <label style="font-weight: bold;">Segregation:</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-sm-12">
                            <table style="margin-left: 30px; border: none;" id="tblfeeDetailmodal">
                                <tr></tr>
                            </table>
                        </div>
                    </div>

                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>

<script>

    function fn_StdFeeDetail(chNo) {
        var sum = 0;
        $.ajax
          ({
              type: "POST",
              url: "../Student/Populate_ChallanDetails",
              data: {
                  ChallanNo: chNo,
              },
              success: function (data) {

                  for (var j = 0; j < data.length; j++) {
                      sum = sum + data[j].AMOUNT;
                  }
                  $("#tblfeeDetailmodal").html("");
                  for (var i = 0; i < data.length; i++) {
                      var Title = data[i].TITLE;
                      var Amount = data[i].AMOUNT;
                      var AcountNo = data[i].CHALLANNO;
                      $("#tblfeeDetailmodal").append("<tr><td class='font-weight-bold'>" + Title + ":</td><td>" + numberWithCommas(Amount) + " Rs.</td></tr>");
                  }
                  $("#lbChallan").text(chNo);
                  $("#lbTotalAmount").text(numberWithCommas(sum) + " Rs.");

              },
              error: function (e) {

              }
          });
    }
    function numberWithCommas(x) {
        return " " + x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    function ftn_PrintChallanForm(challanNo) {
        debugger;
        // $("").addClass("blue");
        var button = $("#btnPrintChallan");
        button.addClass("m-loader m-loader--light m-loader--right");
        var type = "pdf";
        var url = "../Student/PrintChallanForm?Type=" + type + "&ChallanNo=" + challanNo;
        if (type == "pdf") {
            var name = "ChallanForm";
            OpenAndSavePDFReport(url, name);
        }
    }

    function OpenAndSavePDFReport(url, name) {
        var req = new XMLHttpRequest();
        req.open("POST", url, true);
        req.responseType = "blob";
        req.onreadystatechange = function () {

            if (req.readyState === 4 && req.status === 200) {
                var filename = name + ".pdf";
                if (typeof window.chrome !== 'undefined') {
                    // Chrome version
                    var link = document.createElement('a');
                    link.href = window.URL.createObjectURL(req.response);
                    var fileURL = window.URL.createObjectURL(req.response);
                    window.open(fileURL);
                }
                else if (typeof window.navigator.msSaveBlob !== 'undefined') {
                    // Internet Explorer version
                    var blob = new Blob([req.response], { type: 'application/pdf' });
                    window.navigator.msSaveBlob(blob, filename);
                }
                else if (navigator.userAgent.search("Firefox")) {
                    // Firefox version
                    var file = new File([req.response], filename, { type: 'application/pdf' });
                    window.open(URL.createObjectURL(file));
                }
                else {
                    var file = new File([req.response], filename, { type: 'application/pdf' });
                    window.open(URL.createObjectURL(file));
                }
            }
        };
        req.send();
        var button = $("#btnPrintChallan");
        button.removeClass("m-loader m-loader--light m-loader--right");
    }
</script>

                </div>
            </div>
        </div>
        <!-- end:: Body -->
        <!-- begin::Footer -->
        <footer class="m-grid__item m-footer ">
            <div class="m-container m-container--fluid m-container--full-height m-page__container">
                <div class="m-stack m-stack--flex-tablet-and-mobile m-stack--ver m-stack--desktop">
                    <div class="m-stack__item m-stack__item--left m-stack__item--middle m-stack__item--last">
                        <span class="m-footer__copyright">
                            2019 &copy; All rights reserved
                        </span>
                    </div>
                </div>
            </div>
        </footer>
        <!-- end::Footer -->
    </div>
    <!-- end:: Page -->
    <!-- begin::Scroll Top -->
    <div class="m-scroll-top m-scroll-top--skin-top" data-toggle="m-scroll-top" data-scroll-offset="500" data-scroll-speed="300">
        <i class="la la-arrow-up"></i>
    </div>
    <!-- end::Scroll Top -->
    <!-- begin::Quick Nav -->
    <!-- begin::Quick Nav -->
    <!--begin::Base Scripts -->

    <script src="/Assets/demo/demo3/base/scripts.bundle.js" type="text/javascript"></script>
    <!--end::Base Scripts -->
    <!--begin::Page Vendors -->
    <script src="/Assets/vendors/custom/fullcalendar/fullcalendar.bundle.js" type="text/javascript"></script>
    <!--end::Page Vendors -->
    <!--begin::Page Snippets -->
    <script src="/Assets/demo/demo3/base/bootstrap-notify.js" type="text/javascript"></script>
    <!--end::Page Snippets -->
</body>
<!-- end::Body -->
</html>
